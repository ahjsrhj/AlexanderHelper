(function(e){function n(n){for(var a,o,c=n[0],u=n[1],s=n[2],f=0,p=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(n);while(p.length)p.shift()();return i.push.apply(i,s||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],a=!0,o=1;o<t.length;o++){var c=t[o];0!==r[c]&&(a=!1)}a&&(i.splice(n--,1),e=u(u.s=t[0]))}return e}var a={},o={app:0},r={app:0},i=[];function c(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-361a471f":"012edf70"}[e]+".js"}function u(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.e=function(e){var n=[],t={"chunk-361a471f":1};o[e]?n.push(o[e]):0!==o[e]&&t[e]&&n.push(o[e]=new Promise((function(n,t){for(var a="css/"+({}[e]||e)+"."+{"chunk-361a471f":"a7b9060c"}[e]+".css",r=u.p+a,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var s=i[c],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===a||f===r))return n()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){s=p[c],f=s.getAttribute("data-href");if(f===a||f===r)return n()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=n,d.onerror=function(n){var a=n&&n.target&&n.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete o[e],d.parentNode.removeChild(d),t(i)},d.href=r;var l=document.getElementsByTagName("head")[0];l.appendChild(d)})).then((function(){o[e]=0})));var a=r[e];if(0!==a)if(a)n.push(a[2]);else{var i=new Promise((function(n,t){a=r[e]=[n,t]}));n.push(a[2]=i);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,u.nc&&f.setAttribute("nonce",u.nc),f.src=c(e);var p=new Error;s=function(n){f.onerror=f.onload=null,clearTimeout(d);var t=r[e];if(0!==t){if(t){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",p.name="ChunkLoadError",p.type=a,p.request=o,t[1](p)}r[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(n)},u.m=e,u.c=a,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)u.d(t,a,function(n){return e[n]}.bind(null,a));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="https://cdn.jsdelivr.net/gh/ahjsrhj/AlexanderHelper@gh-pages/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=n,s=s.slice();for(var p=0;p<s.length;p++)n(s[p]);var d=f;i.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cd49")},"0613":function(e,n,t){"use strict";var a,o,r=t("5502"),i=t("ade3"),c=t("a5de"),u="MUTATION_UPDATE_SCALE",s="MUTATION_UPDATE_BORDER",f="MUTATION_UPDATE_NAMES",p={namespaced:!0,state:{scale:1,border:!1,names:{p1Main:c["c"],p1Sub:c["d"],p2Main:c["e"],p2Sub:c["f"]},configWindow:{width:600,height:300}},mutations:(a={},Object(i["a"])(a,u,(function(e,n){e.scale=n})),Object(i["a"])(a,s,(function(e,n){e.border=n})),Object(i["a"])(a,f,(function(e,n){e.names=n})),a),actions:{updateScale:function(e,n){var t=e.commit;t(u,n)},updateBorder:function(e,n){var t=e.commit;t(s,n)},updateNames:function(e,n){var t=e.commit;t(f,n)}},getters:{p1MainRegex:function(e){return Object(c["a"])(e.names.p1Main)},p1SubRegex:function(e){return Object(c["a"])(e.names.p1Sub)},p2MainRegex:function(e){return Object(c["a"])(e.names.p2Main)},p2SubRegex:function(e){return Object(c["a"])(e.names.p2Sub)},p2TransitionRegex:function(e){return Object(c["b"])(e.names.p1Main)}}},d=p,l=(t("b680"),"MUTATION_UPDATE_ZONE_ID"),b="MUTATION_UPDATE_P1_BOSS",h="MUTATION_UPDATE_P1_HAND",v="MUTATION_UPDATE_P2_MAIN",g="MUTATION_UPDATE_P2_SUB",m="MUTATION_RESET_HP_INFO",P=function(e,n){var t=e.currentHP,a=e.maxHP;return{name:n,value:a>0?+(t/a*100).toFixed(2):0}},O={namespaced:!0,state:{zoneID:0,enabled:!1,p1Pass:!1,p1Boss:{maxHP:0,currentHP:0},p1Hand:{maxHP:0,currentHP:0},p2Main:{maxHP:0,currentHP:0},p2Sub:{maxHP:0,currentHP:0}},mutations:(o={},Object(i["a"])(o,l,(function(e,n){e.zoneID=n,e.enabled=887===n})),Object(i["a"])(o,b,(function(e,n){n.currentHP<=0?(e.p1Pass=!0,e.p1Boss={currentHP:0,maxHP:0},e.p1Hand={currentHP:0,maxHP:0}):e.p1Boss=n})),Object(i["a"])(o,h,(function(e,n){e.p1Hand=n})),Object(i["a"])(o,m,(function(e){e.p1Boss.currentHP=0,e.p1Boss.maxHP=0,e.p1Hand.currentHP=0,e.p1Hand.maxHP=0,e.p2Main.maxHP=0,e.p2Main.maxHP=0,e.p2Sub.maxHP=0,e.p2Sub.currentHP=0,e.p1Pass=!1})),Object(i["a"])(o,v,(function(e,n){e.p2Main=n})),Object(i["a"])(o,g,(function(e,n){e.p2Sub=n})),o),actions:{updateZoneID:function(e,n){var t=e.commit;t(l,n)},updateP1BossInfo:function(e,n){var t=e.commit;t(b,n)},updateP1HandInfo:function(e,n){var t=e.commit;t(h,n)},updateP2MainInfo:function(e,n){var t=e.commit;t(v,n)},updateP2SubInfo:function(e,n){var t=e.commit;t(g,n)},resetHPInfo:function(e){var n=e.commit;n(m)}},getters:{isP1:function(e){var n=e.p1Boss.currentHP;return n>0},isP2:function(e){var n=e.p2Main,t=e.p2Sub;return n.currentHP>0||t.currentHP>0},mainBoss:function(e,n,t){return n.isP1?P(e.p1Boss,t.config.names.p1Main):n.isP2?P(e.p2Main,t.config.names.p2Main):{name:"",value:0}},subBoss:function(e,n,t){return n.isP1?P(e.p1Hand,t.config.names.p1Sub):n.isP2?P(e.p2Sub,t.config.names.p2Sub):{name:"",value:0}},disparityHP:function(e,n){var t=n.mainBoss.value,a=n.subBoss.value;return t>0&&a>0?Math.abs(t-a).toFixed(2):0}}},w=O,y=Object(r["a"])({modules:{config:d,info:w}});n["a"]=y},a5de:function(e,n,t){"use strict";t.d(n,"g",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"d",(function(){return r})),t.d(n,"e",(function(){return i})),t.d(n,"f",(function(){return c})),t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return s}));t("4d63"),t("ac1f"),t("25f0");var a=/^33\|.{33}\|.{8}\|4000001[026].+$/,o="有生命活水",r="活水之手",i="残暴正义号",c="巡航驱逐者",u=function(e){return new RegExp("^37\\|.{33}\\|.{8}\\|"+e+"\\|.{8}\\|(\\d+)\\|(\\d+)\\|.+$")},s=function(e){return new RegExp("^04\\|.{33}\\|.{8}\\|"+e+"\\|.+$")}},b29b:function(e,n,t){},cd49:function(e,n,t){"use strict";t.r(n);t("a9e3"),t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("7a23"),o=t("8c4f"),r=Object(a["f"])({name:"App",setup:function(){return function(){return Object(a["e"])(o["a"],null,null)}}}),i=(t("d3b7"),[{path:"/",name:"Home",component:function(){return t.e("chunk-361a471f").then(t.bind(null,"bb51"))}}]),c=Object(o["b"])({history:Object(o["c"])("https://cdn.jsdelivr.net/gh/ahjsrhj/AlexanderHelper@gh-pages/"),routes:i}),u=c,s=t("0613"),f=(t("b29b"),t("ac1f"),t("3835")),p=t("5670"),d=t("ebb6"),l=(t("3ca3"),t("841c"),t("ddb0"),t("4795"),t("2b3d"),t("d4ec")),b=t("bee2"),h=t("2bd2"),v=function(){return/HOST_PORT=(wss?:\/\/.+)/.exec(window.location.search)};function g(){if(v()){var e=new URLSearchParams(window.location.search),n="".concat(e.get("HOST_PORT"),"MiniParse")||!1;if(n){var t=new m(n);try{t.connect()}catch(a){console.log(a)}return window.onbeforeunload=function(){t.close()},window.addEventListener("unload",(function(){t.close()}),!1),t.subject}}}var m=function(){function e(n){Object(l["a"])(this,e),this.uri=n,this.activate=!1,this.subject=new h["a"]}return Object(b["a"])(e,[{key:"connect",value:function(){var e=this;"undefined"!==typeof this.websocket&&null!==this.websocket&&this.close(),this.activate=!0,this.websocket=new WebSocket(this.uri),this.websocket.onopen=function(n){e.onopen(n)},this.websocket.onmessage=function(n){e.onmessage(n)},this.websocket.onclose=function(n){e.onclose(n)},this.websocket.onerror=function(n){e.onerror(n)}}},{key:"close",value:function(){this.activate=!1,null!==this.websocket&&"undefined"!==typeof this.websocket&&this.websocket.close()}},{key:"onopen",value:function(e){}},{key:"onclose",value:function(e){var n=this;this.websocket=void 0,this.activate&&setTimeout((function(){n.connect()}),5e3)}},{key:"onmessage",value:function(e){var n;if("."===e.data)null===(n=this.websocket)||void 0===n||n.send(".");else try{var t=JSON.parse(e.data),a=t.type,o=t.msg,r=t.msgtype;if("broadcast"===a&&("ChangeZone"===r||"Chat"===r)){var i={type:"ChangeZone"===r?"ChangeZone":"LogLine",zoneID:"ChangeZone"===r?o.zoneID:void 0,rawLine:"Chat"===r?o:void 0};this.subject.next(i)}}catch(c){}}},{key:"onerror",value:function(e){var n;null===(n=this.websocket)||void 0===n||n.close()}},{key:"onRecvMessage",value:function(e){}},{key:"onBroadcastMessage",value:function(e){}}]),e}(),P=t("808d");function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["LogLine","ChangeZone"];window.OverlayPluginApi.callHandler(JSON.stringify({call:"subscribe",events:e}),(function(e){return console.log("register done",e)}))}function w(){var e=new h["a"],n=P["a"](0,300).pipe(Object(p["a"])((function(){return window.OverlayPluginApi&&window.OverlayPluginApi.ready}))).subscribe((function(){n.unsubscribe(),window.__OverlayCallback=function(n){var t;"LogLine"===n.type?(t={type:"LogLine",rawLine:n.rawLine},e.next(t)):"ChangeZone"===n.type&&(t={type:"ChangeZone",zoneID:n.zoneID},e.next(t))},O(["LogLine","ChangeZone"]),console.log("event is ready!")}));return e}var y=t("a5de"),H=g()||w();H.pipe(Object(p["a"])((function(e){return"ChangeZone"===e.type}))).pipe(Object(d["a"])((function(e){return e.zoneID}))).subscribe((function(e){s["a"].dispatch("info/updateZoneID",e)}));var j=function(e,n){var t=e.exec(n),a=Object(f["a"])(t,3),o=a[1],r=a[2];return{maxHP:+r,currentHP:+o}};H.pipe(Object(p["a"])((function(){return s["a"].state.info.enabled}))).pipe(Object(p["a"])((function(e){return"LogLine"===e.type}))).pipe(Object(d["a"])((function(e){return e.rawLine}))).subscribe((function(e){if(y["g"].test(e))s["a"].dispatch("info/resetHPInfo");else if(s["a"].state.info.p1Pass){var n=s["a"].getters["config/p2MainRegex"],t=s["a"].getters["config/p2SubRegex"];if(n.test(e)){var a=j(n,e);s["a"].dispatch("info/updateP2MainInfo",a)}else if(t.test(e)){var o=j(t,e);s["a"].dispatch("info/updateP2SubInfo",o)}}else{var r=s["a"].getters["config/p1MainRegex"],i=s["a"].getters["config/p1SubRegex"],c=s["a"].getters["config/p2TransitionRegex"];if(r.test(e)){var u=j(r,e);s["a"].dispatch("info/updateP1BossInfo",u)}else if(s["a"].state.info.p1Boss.currentHP>0&&i.test(e)){var f=j(i,e);s["a"].dispatch("info/updateP1HandInfo",f)}else s["a"].state.info.p1Boss.maxHP>0&&c.test(e)&&s["a"].dispatch("info/updateP1BossInfo",{currentHP:0,maxHP:0})}}));u.currentRoute.value.query;u.beforeEach((function(e,n,t){var a=e.query,o=a.p1Main,r=void 0===o?y["c"]:o,i=a.p1Sub,c=void 0===i?y["d"]:i,u=a.p2Main,f=void 0===u?y["e"]:u,p=a.p2Sub,d=void 0===p?y["f"]:p,l=a.scale,b=void 0===l?1:l,h=a.border,v=void 0===h?0:h;s["a"].dispatch("config/updateScale",b&&Number(b)?Number(b):1),s["a"].dispatch("config/updateBorder",!(!v||!Number(v))&&1===Number(v)),s["a"].dispatch("config/updateNames",{p1Main:r,p1Sub:c,p2Main:f,p2Sub:d}),t()})),window.oncontextmenu=function(e){e.preventDefault()},Object(a["b"])(r).use(u).use(s["a"]).mount("#app")}});
//# sourceMappingURL=app.8aadd2d2.js.map